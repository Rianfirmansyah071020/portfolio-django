{% load static %}
<section id="skills" class="skills section">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
      <h2>Skills</h2>
      <p>Saya menggunakan beberapa bahasa pemrograman dan teknologi berikut</p>
    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row skills-content skills-animation">

        <div class="col-lg-6">

          <div class="progress">
            <span class="skill"><span>HTML</span> <i class="val">100%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div><!-- End Skills Item -->

          <div class="progress">
            <span class="skill"><span>CSS</span> <i class="val">90%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div><!-- End Skills Item -->

          <div class="progress">
            <span class="skill"><span>JavaScript</span> <i class="val">75%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div><!-- End Skills Item -->

        </div>

        <div class="col-lg-6">

          <div class="progress">
            <span class="skill"><span>PHP</span> <i class="val">80%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div><!-- End Skills Item -->

          <div class="progress">
            <span class="skill"><span>WordPress/CMS</span> <i class="val">90%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div><!-- End Skills Item -->

          <div class="progress">
            <span class="skill"><span>Photoshop</span> <i class="val">55%</i></span>
            <div class="progress-bar-wrap">
              <div class="progress-bar" role="progressbar" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div><!-- End Skills Item -->

        </div>

      </div>

    </div>

  </section>


  {% block script %}
  <script src="{% static 'portfolio/js/jquery.js' %}"></script>
  <script>
    // Variabel global


    $(function () {
      $.getJSON("{% url 'skill_api_url' %}", function (response) {
        const skills = response.data || [];

        // Kosongkan elemen kolom sebelum isi ulang
        const leftCol = $('.skills-content .col-lg-6').first().empty();
        const rightCol = $('.skills-content .col-lg-6').last().empty();

        skills.forEach(function (skill, index) {
          const skillElement = `
            <div class="progress">
              <span class="skill"><span>${skill.skill}</span> <i class="val">${skill.presentase}%</i></span>
              <div class="progress-bar-wrap">
                <div class="progress-bar" role="progressbar" aria-valuenow="${skill.presentase}" aria-valuemin="0" aria-valuemax="100" style="width: ${skill.presentase}%"></div>
              </div>
            </div>
          `;

          // Bagi dua ke dalam kolom kiri dan kanan
          if (index % 2 === 0) {
            leftCol.append(skillElement);
          } else {
            rightCol.append(skillElement);
          }
        });

      }).fail(function (xhr, status, error) {
        console.error("Gagal memuat data skill:", error);
      });
    });



  </script>
  {% endblock %}

